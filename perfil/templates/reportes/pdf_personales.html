<!DOCTYPE html>
<html>
<head>
    <style>
        /* Configuraciones de página para xhtml2pdf */
        @page { size: letter; margin: 1.5cm; }
        body { font-family: Helvetica, sans-serif; color: #333; line-height: 1.2; }
        
        .header { width: 100%; border-bottom: 2px solid #004085; padding-bottom: 10px; margin-bottom: 20px; }
        .name { font-size: 26pt; font-weight: bold; text-transform: uppercase; color: #004085; }
        
        .section-title { font-weight: bold; text-transform: uppercase; font-size: 12pt; margin-top: 25px; color: #004085; border-bottom: 1px solid #004085; padding-bottom: 3px; }
        
        .data-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .label { font-weight: bold; font-size: 9pt; color: #333; width: 35%; padding: 4px 0; }
        .value { font-size: 10pt; padding: 4px 0; }
        
        .exp-container { margin-top: 15px; padding-bottom: 10px; }
        .job-title { font-weight: bold; font-size: 11pt; color: #333; }
        .company-info { font-weight: bold; font-size: 10pt; color: #004085; margin-top: 2px; }
        .date-location { font-size: 9pt; color: #666; font-style: italic; margin-top: 2px; }
        .exp-desc { font-size: 10pt; margin-top: 8px; text-align: justify; line-height: 1.4; }
        
        .photo { width: 100px; height: auto; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <table class="header">
        <tr>
            <td width="75%">
                <div class="name">{{ perfil.nombres }} {{ perfil.apellidos }}</div>
                <div style="margin-top: 5px; font-size: 10pt; color: #333;">{{ perfil.correo }}</div>
            </td>
            <td width="25%" style="text-align: right;">
                {% if perfil.foto_perfil %}
                    <img src="{{ perfil.foto_perfil.url }}" class="photo">
                {% endif %}
            </td>
        </tr>
    </table>

    <div class="section-title">Perfil</div>
    <div class="exp-desc">{{ perfil.descripcionperfil }}</div>

    <div class="section-title">Información Personal</div>
    <table class="data-table">
        <tr><td class="label">Cédula:</td><td class="value">{{ perfil.numerocedula }}</td></tr>
        <tr><td class="label">Nacionalidad:</td><td class="value">{{ perfil.nacionalidad }}</td></tr>
        <tr><td class="label">Fecha de Nacimiento:</td><td class="value">{{ perfil.fechanacimiento|date:"d/m/Y" }}</td></tr>
        <tr><td class="label">Lugar de Nacimiento:</td><td class="value">{{ perfil.lugarnacimiento }}</td></tr>
        <tr><td class="label">Sexo:</td><td class="value">{% if perfil.sexo == 'H' %}Hombre{% elif perfil.sexo == 'M' %}Mujer{% else %}{{ perfil.sexo }}{% endif %}</td></tr>
        <tr><td class="label">Estado Civil:</td><td class="value">{{ perfil.estadocivil }}</td></tr>
        
        <tr><td class="label">Teléfono Convencional:</td><td class="value">{{ perfil.telefonoconvencional|default:"N/A" }}</td></tr>
        <tr><td class="label">Teléfono Fijo / Celular:</td><td class="value">{{ perfil.telefonofijo|default:"N/A" }}</td></tr>
        <tr><td class="label">Dirección Domiciliaria:</td><td class="value">{{ perfil.direcciondomiciliaria }}</td></tr>
        <tr><td class="label">Dirección de Trabajo:</td><td class="value">{{ perfil.direcciontrabajo|default:"N/A" }}</td></tr>
        <tr><td class="label">Sitio Web:</td><td class="value">{{ perfil.sitioweb|default:"No registrado" }}</td></tr>
        <tr><td class="label">Licencia de Conducir:</td><td class="value">{{ perfil.licenciaconducir|default:"No posee" }}</td></tr>
    </table>

    <div class="section-title">Experiencia Laboral</div>
    {% for exp in items %}
        {% if exp.activarparaqueseveaenfront %}
        <div class="exp-container">
            <div class="job-title">{{ exp.cargodesempenado }}</div>
            <div class="company-info">{{ exp.nombrempresa }} — {{ exp.lugarempresa }}</div>
            <div class="date-location">Desde: {{ exp.fechainiciogestion|date:"M, Y" }} — Hasta: {% if exp.fechafingestion %}{{ exp.fechafingestion|date:"M, Y" }}{% else %}Actualidad{% endif %}</div>
            <div class="exp-desc">{{ exp.descripcionfunciones }}</div>
        </div>
        {% endif %}
    {% empty %}
        <div class="exp-desc">No hay experiencias laborales registradas.</div>
    {% endfor %}

    <div class="section-title">Reconocimientos</div>
    {% for rec in reconocimientos %}
        {% if rec.activarparaqueseveaenfront %}
        <div class="exp-container">
            <div class="job-title">{{ rec.tiporeconocimiento }}</div>
            <div class="company-info">{{ rec.entidadpatrocinadora }}</div>
            <div class="date-location">Fecha: {{ rec.fechareconocimiento|date:"d M, Y" }}</div>
            <div class="exp-desc">{{ rec.descripcionreconocimiento }}</div>
        </div>
        {% endif %}
    {% empty %}
        <div class="exp-desc">No hay reconocimientos registrados.</div>
    {% endfor %}

    <div class="section-title">Cursos Realizados</div>
    {% for curso in cursos %}
        {% if curso.activarparaqueseveaenfront %}
        <div class="exp-container">
            <div class="job-title">{{ curso.nombrecurso }}</div>
            <div class="company-info">{{ curso.entidadpatrocinadora }}</div>
            <div class="date-location">Desde: {{ curso.fechainicio|date:"d M, Y" }} — Hasta: {{ curso.fechafin|date:"d M, Y" }}</div>
            <div class="exp-desc">{{ curso.descripcioncurso }} ({{ curso.totalhoras }} horas)</div>
        </div>
        {% endif %}
    {% empty %}
        <div class="exp-desc">No hay cursos registrados.</div>
    {% endfor %}

    <div class="section-title">Productos Académicos</div>
    {% for prod in productos %}
        {% if prod.activarparaqueseveaenfront %}
        <div class="exp-container">
            <div class="job-title">{{ prod.nombrerecurso }}</div>
            <div class="company-info">{{ prod.clasificador }}</div>
            <div class="exp-desc">{{ prod.descripcion }}</div>
        </div>
        {% endif %}
    {% empty %}
        <div class="exp-desc">No hay productos académicos registrados.</div>
    {% endfor %}

    <div class="section-title">Productos Laborales</div>
    {% for pl in productos_laborales %}
        {% if pl.activarparaqueseveaenfront %}
        <div class="exp-container">
            <div class="job-title">{{ pl.nombreproducto }}</div>
            <div class="date-location">Fecha: {{ pl.fechaproducto|date:"d M, Y" }}</div>
            <div class="exp-desc">{{ pl.descripcion }}</div>
        </div>
        {% endif %}
    {% empty %}
        <div class="exp-desc">No hay productos laborales registrados.</div>
    {% endfor %}

    <div class="section-title">Venta de Garage / Otros Bienes</div>
    {% for art in garage %}
        {% if art.activarparaqueseveaenfront %}
        <div class="exp-container">
            <div class="job-title">{{ art.nombreproducto }}</div>
            <div class="company-info">Estado: {{ art.estadoproducto }} — Valor: ${{ art.valordelbien }}</div>
            <div class="date-location">Publicado: {{ art.fechapublicacion|date:"d M, Y" }}</div>
            <div class="exp-desc">{{ art.descripcion }}</div>
        </div>
        {% endif %}
    {% empty %}
        <div class="exp-desc">No hay artículos de garage registrados.</div>
    {% endfor %}
</body>
</html>